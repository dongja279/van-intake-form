<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>VAN êµì²´ ê²¬ì  ìš”ì²­</title>
  <style>
    :root{--bg:#0b0b0b;--card:#151515;--ink:#f5f5f5;--muted:#b9b9b9;--accent:#3aa0ff}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Malgun Gothic,sans-serif}
    .wrap{max-width:720px;margin:0 auto;padding:20px}
    .banner{background:linear-gradient(180deg,#1f2937,#111827);border:1px solid #2a2a2a;border-radius:16px;padding:16px 14px;margin-bottom:14px}
    .banner strong{display:block;font-size:15px;line-height:1.4}
    .banner .small{color:var(--muted);font-size:12px;margin-top:8px}
    .card{background:var(--card);border:1px solid #2a2a2a;border-radius:16px;padding:16px}
    .title{font-size:18px;margin:0 0 8px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    label{display:block;font-size:13px;color:var(--muted);margin:12px 0 6px}
    input,select,button,textarea{width:100%;padding:14px 12px;border-radius:12px;border:1px solid #2b2b2b;background:#0f0f10;color:var(--ink);font-size:15px;outline:none}
    input::placeholder{color:#8d8d8d}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .pill{display:inline-flex;gap:6px;background:#0f0f10;border:1px solid #2b2b2b;padding:6px 10px;border-radius:999px;align-items:center}
    .section{margin-top:8px}
    .hide{display:none}
    .actions{display:flex;gap:10px;margin-top:16px}
    .primary{background:var(--accent);border:1px solid #348fe3;font-weight:600}
    .ghost{background:#0f0f10;border:1px dashed #3a3a3a}
    .help{font-size:12px;color:#8a8a8a;margin-top:6px}
    .ok{color:#c7ffea}.err{color:#ffb6b6}
    footer{margin:28px 0 8px;color:#7b7b7b;font-size:12px;text-align:center}
    .hgroup{margin-top:18px;border-top:1px dashed #2a2a2a;padding-top:12px}
    .hgroup h3{margin:0 0 6px;font-size:15px}
    /* FAQ */
    .faq-title{margin:18px 0 8px;font-size:16px}
    details{border:1px solid #2b2b2b;border-radius:12px;background:#0f0f10;margin:8px 0}
    summary{cursor:pointer;padding:12px 14px;font-size:14px;color:#e6e6e6;list-style:none}
    details[open] summary{border-bottom:1px solid #232323}
    details .answer{padding:12px 14px;color:#bdbdbd;font-size:13px;line-height:1.55}
    summary::-webkit-details-marker{display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="banner">
      <strong>ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥ í•´ ì£¼ì‹œë©´ ê²¬ì  ì‚°ì¶œ í›„ ì¼ì£¼ì¼ ë‚´ë¡œ ì—°ë½ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</strong>
      <div class="small">ë¬¸ì˜ : í•œêµ­ê²°ì œì†”ë£¨ì…˜ ë°°ì¤€ì²  ëŒ€í‘œ 010-4180-8867</div>
    </div>

    <div class="card">
      <h2 class="title">VAN êµì²´ ì ì¬ê³ ê° ì…ë ¥ í¼</h2>

      <!-- ì—…ì¢… ì„ íƒ -->
      <label for="bizType">ì—…ì¢… ì„ íƒ</label>
      <div class="row" role="radiogroup" aria-label="ì—…ì¢… ì„ íƒ">
        <button class="pill" type="button" data-type="ì‹ë‹¹" id="btn-food"><span>ğŸ½ï¸</span><span>ì‹ë‹¹</span></button>
        <button class="pill" type="button" data-type="ë³‘ì›" id="btn-hospital"><span>ğŸ¥</span><span>ë³‘ì›</span></button>
      </div>
      <input type="hidden" id="bizType" value="ì‹ë‹¹"/>

      <!-- ì‹ë‹¹ ì„¹ì…˜(êµì²´ ë²„ì „) -->
      <div id="foodSection" class="section">
        <!-- 1. ì‹ë‹¹ì •ë³´ -->
        <div class="hgroup">
          <h3>1) ì‹ë‹¹ì •ë³´</h3>
          <label>ì—…ì²´ëª…</label>
          <input id="r_name" type="text" placeholder="ì˜ˆ) í•œêµ­ê²°ì œë„¤íŠ¸ì›ìŠ¤ ê°•ë‚¨ì " />
          <label>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</label>
          <input id="r_bizno" type="text" inputmode="numeric" placeholder="123-45-67890" pattern="^\\d{3}-\\d{2}-\\d{5}$" />
          <div class="help">í˜•ì‹: 123-45-67890</div>
          <label>ë‹´ë‹¹ìëª…</label>
          <input id="r_person" type="text" placeholder="ì˜ˆ) í™ê¸¸ë™" />
          <label>ì—°ë½ì²˜</label>
          <input id="r_phone" type="tel" inputmode="numeric" placeholder="010-0000-0000" pattern="^01[016789]-\\d{3,4}-\\d{4}$" />
          <div class="help">í˜•ì‹ ì˜ˆ: 010-1234-5678</div>
        </div>

        <!-- 2. ê¸°ì¡´ í¬ìŠ¤ê¸° ì •ë³´ -->
        <div class="hgroup">
          <h3>2) ê¸°ì¡´ í¬ìŠ¤ê¸° ì •ë³´</h3>
          <label>ì—…ì²´(í”„ë¡œê·¸ë¨) ëª…</label>
          <input id="r_pos_name" type="text" placeholder="ì˜ˆ) ì˜¤ì¼€ì´í¬ìŠ¤" />
          <label>ê³„ì•½ê¸°ê°„</label>
          <div class="grid-2">
            <input id="r_contract_s" type="date" />
            <input id="r_contract_e" type="date" />
          </div>
          <label>ìœ„ì•½ê¸ˆ(ìµì›” ë§ ê¸°ì¤€)</label>
          <input id="r_penalty" type="number" min="0" step="1" placeholder="ì²œì› ë‹¨ìœ„ ì˜ˆ) 300" />
          <div class="help">ë‹¨ìœ„: ì²œì›</div>
        </div>

        <!-- 3. ì„¤ì¹˜ëœ ë‹¨ë§ê¸° ì •ë³´ -->
        <div class="hgroup">
          <h3>3) ì„¤ì¹˜ëœ ë‹¨ë§ê¸° ì •ë³´</h3>
          <label>í¬ìŠ¤ê¸° ëŒ€ìˆ˜(ë©”ì¸í¬ìŠ¤, ì˜¤ë”í¬ìŠ¤ ë“±)</label>
          <input id="r_poscnt" type="number" min="0" step="1" placeholder="ì˜ˆ) 2" />
        </div>

        <!-- 4. ì „ë…„ë„ ì¹´ë“œë§¤ì¶œ(VAT í¬í•¨) -->
        <div class="hgroup">
          <h3>4) ì „ë…„ë„ ì¹´ë“œë§¤ì¶œ(VAT í¬í•¨)</h3>
          <label>ì „ë…„ë„ ê¸°ì¤€ ì¹´ë“œë§¤ì¶œ ì´ì•¡(ë°±ë§Œì›)</label>
          <input id="r_sales_amt" type="number" min="0" step="1" placeholder="ì˜ˆ) 850" />
          <label>ì „ë…„ë„ ê¸°ì¤€ ì¹´ë“œë§¤ì¶œ ê±´ ìˆ˜(ê±´)</label>
          <input id="r_sales_cnt" type="number" min="0" step="1" placeholder="ì˜ˆ) 12450" />
        </div>
      </div>

      <!-- ë³‘ì› ì„¹ì…˜(ê¸°ì¡´ ìœ ì§€) -->
      <div id="hospitalSection" class="section hide">
        <div class="hgroup">
          <h3>1) ë³‘ì›ì •ë³´</h3>
          <label>ì—…ì²´ëª…</label>
          <input id="h_name" type="text" placeholder="ì˜ˆ) í•œêµ­ì˜ì›" />
          <label>ì‚¬ì—…ì ë“±ë¡ ë²ˆí˜¸</label>
          <input id="h_bizno" type="text" inputmode="numeric" placeholder="123-45-67890" pattern="^\\d{3}-\\d{2}-\\d{5}$" />
          <div class="help">í˜•ì‹: 123-45-67890</div>
          <label>ë‹´ë‹¹ìëª…</label>
          <input id="h_person" type="text" placeholder="ì˜ˆ) ê¹€ì›ì¥" />
          <label>ì—°ë½ì²˜</label>
          <input id="h_phone" type="tel" inputmode="numeric" placeholder="010-0000-0000" pattern="^01[016789]-\\d{3,4}-\\d{4}$" />
        </div>

        <div class="hgroup">
          <h3>2) ê¸°ì¡´ EMR ì—…ì²´ ì •ë³´</h3>
          <label>ì—…ì²´ëª…</label>
          <input id="h_emr_name" type="text" placeholder="ì˜ˆ) â—‹â—‹EMR" />
          <label>ë‹´ë‹¹ìëª…</label>
          <input id="h_emr_person" type="text" placeholder="ì˜ˆ) ì´ë§¤ë‹ˆì €" />
          <label>ì—°ë½ì²˜</label>
          <input id="h_emr_phone" type="tel" inputmode="numeric" placeholder="010-0000-0000" pattern="^01[016789]-\\d{3,4}-\\d{4}$" />
          <label>EMR ì—…ì²´ ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€</label>
          <select id="h_emr_switch">
            <option value="">ì„ íƒ</option><option>ê°€ëŠ¥</option><option>ë¶ˆê°€</option><option>ê²€í†  í•„ìš”</option>
          </select>
        </div>

        <div class="hgroup">
          <h3>3) ê¸°ì¡´ Van ì—…ì²´ ì •ë³´</h3>
          <label>ì—…ì²´ëª…</label>
          <input id="h_van_name" type="text" placeholder="ì˜ˆ) í•œêµ­ê²°ì œë„¤íŠ¸ì›ìŠ¤" />
          <label>ê³„ì•½ê¸°ê°„</label>
          <div class="grid-2">
            <input id="h_van_contract_s" type="date" />
            <input id="h_van_contract_e" type="date" />
          </div>
          <label>ìœ„ì•½ê¸ˆ(ìµì›” ë§ ê¸°ì¤€)</label>
          <input id="h_van_penalty" type="number" min="0" step="1" placeholder="ì²œì› ë‹¨ìœ„ ì˜ˆ) 300" />
          <div class="help">ë‹¨ìœ„: ì²œì›</div>
        </div>

        <div class="hgroup">
          <h3>4) ì¹´ë“œ ë‹¨ë§ê¸°(ë¦¬ë”ê¸°) ì •ë³´</h3>
          <label>ë‹¨ë§ê¸°(ë¦¬ë”ê¸°) ëŒ€ìˆ˜</label>
          <input id="h_reader_count" type="number" min="0" step="1" placeholder="ì˜ˆ) 3" />
        </div>

        <div class="hgroup">
          <h3>5) ì „ë…„ë„ ì¹´ë“œë§¤ì¶œ(VAT í¬í•¨)</h3>
          <label>100ë§Œì› ì´í•˜ ê±´ ìˆ˜(ê±´)</label>
          <input id="h_under_cnt" type="number" min="0" step="1" placeholder="ì˜ˆ) 1200" />
          <label>100ë§Œì› ì´í•˜ ë§¤ì¶œ í•©ê³„(ë°±ë§Œ)</label>
          <input id="h_under_amt" type="number" min="0" step="1" placeholder="ì˜ˆ) 450" />
          <label>100ë§Œì› ì´ìƒ ê±´ ìˆ˜(ê±´)</label>
          <input id="h_over_cnt" type="number" min="0" step="1" placeholder="ì˜ˆ) 150" />
          <label>100ë§Œì› ì´ìƒ ë§¤ì¶œ í•©ê³„(ë°±ë§Œ)</label>
          <input id="h_over_amt" type="number" min="0" step="1" placeholder="ì˜ˆ) 320" />
        </div>
      </div>

      <!-- ì œì¶œ ì˜ì—­ -->
      <div class="actions">
        <button id="btnSubmit" class="primary" type="button">ì œì¶œ</button>
        <button id="btnDownload" class="ghost" type="button">CSVë¡œ ì €ì¥</button>
        <button id="btnCopy" class="ghost" type="button">JSON ë³µì‚¬</button>
      </div>

      <div id="result" class="help" aria-live="polite" style="margin-top:10px"></div>
    </div>

    <!-- FAQ ì¹´ë“œ -->
    <div class="card" style="margin-top:12px">
      <h2 class="faq-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ)</h2>

      <!-- ì‹ë‹¹ FAQ -->
      <div id="faq-food">
        <details><summary>VAN êµì²´ ì „ì²´ ì ˆì°¨ëŠ”?</summary>
          <div class="answer">ìƒë‹´ â†’ ìˆ˜ìˆ˜ë£Œ ì‹œë®¬ë ˆì´ì…˜ â†’ ê²¬ì Â·ê³„ì•½ â†’ ì„¤ì¹˜/ì„¸íŒ… â†’ ì •ì‚° ê³„ì¢Œ ë³€ê²½ â†’ 1ê°œì›” ëª¨ë‹ˆí„°ë§. í‰ê·  3~7ì¼.</div>
        </details>
        <details><summary>POSëŠ” ê·¸ëŒ€ë¡œ ë‘ê³  VANë§Œ ë°”ê¿€ ìˆ˜ ìˆë‚˜?</summary>
          <div class="answer">ëŒ€ë¶€ë¶„ ê°€ëŠ¥. POSì‚¬ ì—°ë™ ë°©ì‹ë§Œ í™•ì¸í•˜ë©´ ëœë‹¤. í•„ìš” ì‹œ POSì‚¬ì™€ ì§ì ‘ ì¡°ìœ¨.</div>
        </details>
        <details><summary>ìœ„ì•½ê¸ˆì´ ìˆìœ¼ë©´ ì „í™˜ì´ ì–´ë µë‚˜?</summary>
          <div class="answer">ì•„ë‹ˆë‹¤. ì”ì—¬ê¸°ê°„Â·ìœ„ì•½ê¸ˆ ëŒ€ë¹„ ìˆ˜ìˆ˜ë£Œ ì ˆê°íš¨ê³¼ë¥¼ ì‚°ì¶œí•´ ì†ìµë¶„ê¸°ì ì„ ì œì‹œí•œë‹¤.</div>
        </details>
        <details><summary>ìˆ˜ìˆ˜ë£ŒëŠ” ë¬´ì—‡ìœ¼ë¡œ ê²°ì •ë˜ë‚˜?</summary>
          <div class="answer">ì „ë…„ë„ ë§¤ì¶œ/ê±´ìˆ˜, ì—…ì¢…, ë‹¨ë§ê¸° ìˆ˜, ê°„í¸ê²°ì œ ë¹„ì¤‘ ë“±. ì…ë ¥ê°’ìœ¼ë¡œ ì‹œë®¬ë ˆì´ì…˜í•œë‹¤.</div>
        </details>
        <details><summary>ì •ì‚° ì£¼ê¸°ì™€ ì…ê¸ˆ ì‹œì ì€?</summary>
          <div class="answer">ê¸°ë³¸ D+2 ë˜ëŠ” ì£¼ê°„ì •ì‚°. ê¸°ì¡´ ì£¼ê¸° ìœ ì§€ ê°€ëŠ¥.</div>
        </details>
        <details><summary>ì„¤ì¹˜ëŠ” ì˜ì—… ì¤‘ë‹¨ ì—†ì´ ê°€ëŠ¥í•œê°€?</summary>
          <div class="answer">ê°€ëŠ¥. í¬ìŠ¤ 1ëŒ€ ê¸°ì¤€ 30~60ë¶„. í”¼í¬ íƒ€ì„ íšŒí”¼ ìŠ¤ì¼€ì¤„ë¡œ ì§„í–‰.</div>
        </details>
        <details><summary>ê°„í¸ê²°ì œ ì´ê´€ê³¼ ì‹ ê·œ ì±„ë„ ì¶”ê°€ëŠ”?</summary>
          <div class="answer">ê°€ëŠ¥. ì¹´ì¹´ì˜¤/ë„¤ì´ë²„/ì œë¡œí˜ì´ ë“± ì´ê´€Â·ì‹ ê·œ ê°œí†µ ì§€ì›.</div>
        </details>
        <details><summary>ì¶”ê°€ ë¹„ìš©ì€?</summary>
          <div class="answer">ê¸°ë³¸ ì„¤ì¹˜Â·ì„¸íŒ… ë¬´ìƒ. íŠ¹ìˆ˜ ì¥ë¹„ë‚˜ ê³µì‚¬ëŠ” ë³„ë„ í˜‘ì˜.</div>
        </details>
        <details><summary>A/SëŠ” ëˆ„ê°€ ë‹´ë‹¹í•˜ë‚˜?</summary>
          <div class="answer">í•œêµ­ê²°ì œì†”ë£¨ì…˜ ì§€ì—­ ê¸°ì‚¬ì™€ í˜‘ë ¥ POS ëŒ€ë¦¬ì ì´ 365ì¼ ì›ê²©Â·í˜„ì¥ ì§€ì›.</div>
        </details>
      </div>

      <!-- ë³‘ì› FAQ -->
      <div id="faq-hospital" class="hide">
        <details><summary>ë³‘ì› VAN êµì²´ ì ˆì°¨ëŠ”?</summary>
          <div class="answer">í˜„í™© ì ê²€(EMR/ìˆ˜ë‚©íë¦„) â†’ ìˆ˜ìˆ˜ë£ŒÂ·ì •ì‚° êµ¬ì¡° ì„¤ê³„ â†’ EMR ì—°ë™ í…ŒìŠ¤íŠ¸ â†’ ì„¤ì¹˜Â·ê²€ìˆ˜ â†’ ì‹œë‚˜ë¦¬ì˜¤ ì ê²€ â†’ 1ê°œì›” ëª¨ë‹ˆí„°ë§.</div>
        </details>
        <details><summary>EMR ì—°ë™ í™•ì¸ì€?</summary>
          <div class="answer">EMR ì—…ì²´Â·ì—°ë™ ë°©ì‹ í™•ì¸ í›„, í•„ìš” ì‹œ EMRì‚¬ì™€ ì§ì ‘ í˜‘ì˜í•´ í‚¤Â·ì„¤ì • ì´ê´€.</div>
        </details>
        <details><summary>ë³´í—˜/ë¹„ê¸‰ì—¬Â·í˜„ê¸ˆì˜ìˆ˜ì¦ ì²˜ë¦¬?</summary>
          <div class="answer">ë™ì¼í•˜ê²Œ ê°€ëŠ¥. ë¦¬ë”ê¸°Â·í”„ë¦°í„° ì„¸íŒ…ì„ EMR ì›Œí¬í”Œë¡œìš°ì— ë§ì¶° êµ¬ì„±.</div>
        </details>
        <details><summary>ì—¬ëŸ¬ ì°½êµ¬ì˜ ë¦¬ë”ê¸° ëŒ€ìˆ˜ ì‚°ì •?</summary>
          <div class="answer">ë™ì‹œ ì²˜ë¦¬ëŸ‰ê³¼ í”¼í¬ íƒ€ì„ ê¸°ì¤€ ì‚°ì •. ì˜ˆë¹„ 1ëŒ€ ê¶Œì¥.</div>
        </details>
        <details><summary>ì •ì‚°Â·ëª…ì„¸ì„œ ì œê³µ?</summary>
          <div class="answer">D+2 ë˜ëŠ” ì£¼ê°„ì •ì‚°. ê³¼/ì°½êµ¬ë³„ ë¶„ë¦¬ ë¦¬í¬íŠ¸ì™€ ì›”ë³„ ëª…ì„¸ì„œ ì´ë©”ì¼ ìë™ ë°œì†¡ ê°€ëŠ¥.</div>
        </details>
        <details><summary>EMR ê³„ì•½Â·ë°ì´í„° ì˜í–¥?</summary>
          <div class="answer">ì—†ìŒ. VANë§Œ ë³€ê²½. EMR ì„¤ì •ê°’ ì¼ë¶€ ë³€ê²½ í•„ìš” ê°€ëŠ¥.</div>
        </details>
        <details><summary>ë³´ì•ˆê³¼ í™˜ìì •ë³´ ë³´í˜¸?</summary>
          <div class="answer">ì¹´ë“œì •ë³´ëŠ” ë‹¨ë§ì—ì„œ ì•”í˜¸í™”. í™˜ìì •ë³´ëŠ” EMRì—ë§Œ ì €ì¥. PCI-DSS ì¤€ìˆ˜.</div>
        </details>
        <details><summary>ìœ„ì•½ê¸ˆ ìˆì–´ë„ êµì²´?</summary>
          <div class="answer">ê°€ëŠ¥. ì ˆê°ì•¡ ë¶„ì„ í›„ ìµœì  ì „í™˜ ì‹œì  ì œì•ˆ.</div>
        </details>
        <details><summary>ìœ ì§€ë³´ìˆ˜Â·ì¥ì•  ëŒ€ì‘?</summary>
          <div class="answer">365ì¼ ì½œì„¼í„°Â·ì§€ì—­ ì—”ì§€ë‹ˆì–´ ì§€ì›. ë¦¬ë”ê¸° êµì²´ SLA ëª…ì‹œ ê°€ëŠ¥.</div>
        </details>
      </div>
    </div>

    <footer>Â© í•œêµ­ê²°ì œì†”ë£¨ì…˜ VAN íŒŒíŠ¸ë„ˆ</footer>
  </div>

  <script>
    // ì—…ì¢… í† ê¸€
    const bizTypeEl = document.getElementById('bizType');
    const foodSection = document.getElementById('foodSection');
    const hospitalSection = document.getElementById('hospitalSection');
    const btnFood = document.getElementById('btn-food');
    const btnHospital = document.getElementById('btn-hospital');
    const faqFood = document.getElementById('faq-food');
    const faqHospital = document.getElementById('faq-hospital');

    function setType(t){
      bizTypeEl.value=t;
      const isFood = t==='ì‹ë‹¹';
      foodSection.classList.toggle('hide', !isFood);
      hospitalSection.classList.toggle('hide', isFood);
      faqFood.classList.toggle('hide', !isFood);
      faqHospital.classList.toggle('hide', isFood);
      [btnFood,btnHospital].forEach(b=>b.style.borderColor='#2b2b2b');
      (isFood?btnFood:btnHospital).style.borderColor='var(--accent)';
      document.querySelectorAll('details').forEach(d=>d.open=false);
    }
    btnFood.onclick=()=>setType('ì‹ë‹¹');
    btnHospital.onclick=()=>setType('ë³‘ì›');

    // ë°ì´í„° ìˆ˜ì§‘
    function collect(){
      const type=bizTypeEl.value;
      const payload={ì—…ì¢…:type, ì œì¶œì‹œê°:new Date().toISOString()};
      if(type==='ì‹ë‹¹'){
        payload.ì‹ë‹¹ì •ë³´={
          ì—…ì²´ëª…: document.getElementById('r_name').value.trim(),
          ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: document.getElementById('r_bizno').value.trim(),
          ë‹´ë‹¹ìëª…: document.getElementById('r_person').value.trim(),
          ì—°ë½ì²˜: document.getElementById('r_phone').value.trim()
        };
        payload.ê¸°ì¡´í¬ìŠ¤ì •ë³´={
          í”„ë¡œê·¸ë¨ëª…: document.getElementById('r_pos_name').value.trim(),
          ê³„ì•½ì‹œì‘: document.getElementById('r_contract_s').value,
          ê³„ì•½ì¢…ë£Œ: document.getElementById('r_contract_e').value,
          ìœ„ì•½ê¸ˆ_ì²œì›: Number(document.getElementById('r_penalty').value||0)
        };
        payload.ë‹¨ë§ê¸°ì •ë³´={ í¬ìŠ¤ê¸°ëŒ€ìˆ˜: Number(document.getElementById('r_poscnt').value||0) };
        payload.ì „ë…„ë„ì¹´ë“œë§¤ì¶œ={
          ì´ì•¡_ë°±ë§Œì›: Number(document.getElementById('r_sales_amt').value||0),
          ê±´ìˆ˜_ê±´: Number(document.getElementById('r_sales_cnt').value||0)
        };
      }else{
        payload.ë³‘ì›ì •ë³´={
          ì—…ì²´ëª…: document.getElementById('h_name').value.trim(),
          ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: document.getElementById('h_bizno').value.trim(),
          ë‹´ë‹¹ìëª…: document.getElementById('h_person').value.trim(),
          ì—°ë½ì²˜: document.getElementById('h_phone').value.trim()
        };
        payload.EMR_ì—…ì²´ì •ë³´={
          ì—…ì²´ëª…: document.getElementById('h_emr_name').value.trim(),
          ë‹´ë‹¹ìëª…: document.getElementById('h_emr_person').value.trim(),
          ì—°ë½ì²˜: document.getElementById('h_emr_phone').value.trim(),
          ë³€ê²½ê°€ëŠ¥ì—¬ë¶€: document.getElementById('h_emr_switch').value
        };
        payload.VAN_ì—…ì²´ì •ë³´={
          ì—…ì²´ëª…: document.getElementById('h_van_name').value.trim(),
          ê³„ì•½ì‹œì‘: document.getElementById('h_van_contract_s').value,
          ê³„ì•½ì¢…ë£Œ: document.getElementById('h_van_contract_e').value,
          ìœ„ì•½ê¸ˆ_ì²œì›: Number(document.getElementById('h_van_penalty').value||0)
        };
        payload.ë¦¬ë”ê¸°ì •ë³´={ ëŒ€ìˆ˜: Number(document.getElementById('h_reader_count').value||0) };
        payload.ì „ë…„ë„ì¹´ë“œë§¤ì¶œ={
          ë°±ë§Œì›ì´í•˜_ê±´ìˆ˜: Number(document.getElementById('h_under_cnt').value||0),
          ë°±ë§Œì›ì´í•˜_í•©ê³„_ë°±ë§Œ: Number(document.getElementById('h_under_amt').value||0),
          ë°±ë§Œì›ì´ìƒ_ê±´ìˆ˜: Number(document.getElementById('h_over_cnt').value||0),
          ë°±ë§Œì›ì´ìƒ_í•©ê³„_ë°±ë§Œ: Number(document.getElementById('h_over_amt').value||0)
        };
      }
      return payload;
    }

    // ê²€ì¦
    function validate(d){
      const phoneRe=/^01[016789]-\d{3,4}-\d{4}$/;
      const bizRe=/^\d{3}-\d{2}-\d{5}$/;
      if(d.ì—…ì¢…==='ì‹ë‹¹'){
        const s=d.ì‹ë‹¹ì •ë³´;
        if(!s.ì—…ì²´ëª…) return 'ì‹ë‹¹ ì—…ì²´ëª…ì€ í•„ìˆ˜';
        if(s.ì—°ë½ì²˜ && !phoneRe.test(s.ì—°ë½ì²˜)) return 'ì‹ë‹¹ ì—°ë½ì²˜ í˜•ì‹ í™•ì¸';
        if(s.ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ && !bizRe.test(s.ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸)) return 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ í˜•ì‹ í™•ì¸';
      }else{
        const h=d.ë³‘ì›ì •ë³´;
        if(!h.ì—…ì²´ëª…) return 'ë³‘ì› ì—…ì²´ëª…ì€ í•„ìˆ˜';
        if(h.ì—°ë½ì²˜ && !phoneRe.test(h.ì—°ë½ì²˜)) return 'ë³‘ì› ì—°ë½ì²˜ í˜•ì‹ í™•ì¸';
        if(h.ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ && !bizRe.test(h.ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸)) return 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ í˜•ì‹ í™•ì¸';
      }
      return '';
    }

    // ì œì¶œ(ì„ì‹œ: ì½˜ì†”)
    const resultEl=document.getElementById('result');
    document.getElementById('btnSubmit').onclick=async()=>{
      const data=collect();
      const err=validate(data);
      if(err){resultEl.innerHTML='<span class="err">ì˜¤ë¥˜: '+err+'</span>';return;}
      console.log('ì œì¶œ ë°ì´í„°:', data);
      resultEl.innerHTML='<span class="ok">ì œì¶œ ì¤€ë¹„ ì™„ë£Œ. í˜„ì¬ëŠ” ë¡œì»¬ ì €ì¥/ë³µì‚¬ë§Œ ì§€ì›í•©ë‹ˆë‹¤.</span>';
      // TODO: ì„œë²„ ì—°ê²° ì‹œ fetch POST ì¶”ê°€
    };

    // CSV ì €ì¥
    document.getElementById('btnDownload').onclick=()=>{
      const d=collect(); const err=validate(d); if(err){resultEl.innerHTML='<span class="err">ì˜¤ë¥˜: '+err+'</span>';return;}
      const flat=(obj,prefix='')=>{
        return Object.entries(obj).reduce((acc,[k,v])=>{
          const key=prefix?`${prefix}.${k}`:k;
          if(v && typeof v==='object' && !Array.isArray(v)) Object.assign(acc,flat(v,key));
          else acc[key]=v;
          return acc;
        },{});
      };
      const f=flat(d);
      const keys=Object.keys(f);
      const csv=[keys.join(','), keys.map(k=>JSON.stringify(f[k] ?? '')).join(',')].join('\n');
      const blob=new Blob([csv],{type:'text/csv;charset=utf-8;'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='van-intake.csv'; a.click(); URL.revokeObjectURL(a.href);
      resultEl.innerHTML='<span class="ok">CSV ì €ì¥ ì™„ë£Œ</span>';
    };

    // JSON ë³µì‚¬
    document.getElementById('btnCopy').onclick=async()=>{
      const d=collect(); const err=validate(d); if(err){resultEl.innerHTML='<span class="err">ì˜¤ë¥˜: '+err+'</span>';return;}
      await navigator.clipboard.writeText(JSON.stringify(d,null,2));
      resultEl.innerHTML='<span class="ok">JSON ë³µì‚¬ ì™„ë£Œ</span>';
    };

    // ì´ˆê¸°
    setType('ì‹ë‹¹');
  </script>
</body>
</html>
